#! /usr/bin/env node
/*
 * build.js
 * Copyright (C) 2013 Adrian Perez <aperez@igalia.com>
 *
 * Distributed under terms of the MIT license.
 */

var S = require("./site.js");
var P = require("path");
var F = require("fs");

site = new S.Site(".");

for (var kind in site.content) {
  var items = site.content[kind];
  for (var i = 0; i < items.length; i++) {
    var item = items[i];
    var dest = P.dirname(item.relpath()) + P.sep + item.slug() + ".html";
    console.log(kind + " " + item.relpath() + " â†’ " + dest);
    F.writeFile(dest, item.render(), function (err) {
      if (err) throw err;
    });
  }
}

